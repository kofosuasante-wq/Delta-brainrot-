print("Kailos Ultimate Insta Steal/Teleport loaded!")

-- CONFIG: Change this to the name of the part in front of your base/collect zone!
local BASE_PART_NAME = "CollectZone" -- <--- Change this to match your game's collect zone part name!

local Players = game:GetService("Players")
local player = Players.LocalPlayer

-- UI Setup
local ScreenGui = Instance.new("ScreenGui")
ScreenGui.Name = "KailosBrainrotUI"
ScreenGui.ResetOnSpawn = false
pcall(function() ScreenGui.Parent = game:GetService("CoreGui") end)
if not ScreenGui.Parent then
    ScreenGui.Parent = player:WaitForChild("PlayerGui")
end

-- Button design
local button = Instance.new("TextButton")
button.Name = "InstaStealTeleportButton"
button.Size = UDim2.new(0, 220, 0, 54)
button.Position = UDim2.new(0.05, 0, 0.85, 0)
button.BackgroundColor3 = Color3.fromRGB(0, 200, 255)
button.TextColor3 = Color3.fromRGB(255,255,255)
button.Text = "⚡ INSTANT STEAL & TELEPORT ⚡"
button.Font = Enum.Font.FredokaOne
button.TextScaled = true
button.BorderSizePixel = 0
button.AutoButtonColor = true
button.Visible = true
button.AnchorPoint = Vector2.new(0, 0)
button.Parent = ScreenGui

-- Rounded corners
local corner = Instance.new("UICorner")
corner.CornerRadius = UDim.new(0, 18)
corner.Parent = button

-- Drop shadow for style
local shadow = Instance.new("ImageLabel")
shadow.Name = "Shadow"
shadow.Image = "rbxassetid://1316045217"
shadow.Size = UDim2.new(1, 16, 1, 16)
shadow.Position = UDim2.new(0, -8, 0, -8)
shadow.BackgroundTransparency = 1
shadow.ImageTransparency = 0.7
shadow.Parent = button
button.ZIndex = 2
shadow.ZIndex = 1

-- Make button draggable
local dragging, dragInput, dragStart, startPos
button.Active = true
button.Draggable = true
button.MouseButton1Down:Connect(function(input)
    dragging = true
    dragStart = input.Position
    startPos = button.Position
    input.Changed:Connect(function()
        if input.UserInputState == Enum.UserInputState.End then
            dragging = false
        end
    end)
end)
button.MouseMoved:Connect(function(x, y)
    if dragging then
        local delta = Vector2.new(x, y) - dragStart
        button.Position = UDim2.new(startPos.X.Scale, startPos.X.Offset + delta.X, startPos.Y.Scale, startPos.Y.Offset + delta.Y)
    end
end)

-- Check if holding ANY brainrot object
local function hasAnyBrainrot()
    local char = player.Character
    if not char then return false end
    for _, obj in ipairs(char:GetChildren()) do
        if obj.Name:lower():find("brainrot") then
            return true
        end
        for _, desc in ipairs(obj:GetDescendants()) do
            if desc.Name:lower():find("brainrot") then
                return true
            end
        end
    end
    return false
end

-- Teleport function
local function teleportToBase()
    local char = player.Character
    if not char or not char:FindFirstChild("HumanoidRootPart") then return end
    local base = workspace:FindFirstChild(BASE_PART_NAME)
    if base and base.Position then
        char.HumanoidRootPart.CFrame = CFrame.new(base.Position + Vector3.new(0, 4, 0))
        print("Teleported to base front!")
    else
        print("Base part not found! Change BASE_PART_NAME.")
        button.Text = "Base not found!"
        wait(1)
        button.Text = "⚡ INSTANT STEAL & TELEPORT ⚡"
    end
end

-- Main button action
button.MouseButton1Click:Connect(function()
    if hasAnyBrainrot() then
        teleportToBase()
        button.Text = "Teleported!"
        wait(0.5)
        button.Text = "⚡ INSTANT STEAL & TELEPORT ⚡"
    else
        button.Text = "Hold Brainrot!"
        wait(0.7)
        button.Text = "⚡ INSTANT STEAL & TELEPORT ⚡"
    end
end)

game.StarterGui:SetCore("SendNotification", {
    Title = "Kailos Ultimate Brainrot",
    Text = "Loaded! Drag the ⚡ INSTANT STEAL & TELEPORT ⚡ button and use when holding any brainrot.",
    Duration = 8
})
